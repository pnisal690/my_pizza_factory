  [1m[35m (14.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `my_pizza_factory_test`[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE DATABASE `my_pizza_factory_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS `crusts` CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE `crusts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `inventories` CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE `inventories` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `item_type` varchar(255), `item_id` int, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_item_toppings` CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE `order_item_toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_item_id` bigint NOT NULL, `topping_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_item_toppings_on_order_item_id` (`order_item_id`), INDEX `index_order_item_toppings_on_topping_id` (`topping_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_items` CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE `order_items` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `pizza_id` bigint NOT NULL, `topping_id` bigint, `side_id` bigint, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `crust_id` int, `size` varchar(255), `total_amount` decimal(10,2) DEFAULT 0.0, INDEX `index_order_items_on_order_id` (`order_id`), INDEX `index_order_items_on_pizza_id` (`pizza_id`), INDEX `index_order_items_on_side_id` (`side_id`), INDEX `index_order_items_on_topping_id` (`topping_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_sides` CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE `order_sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `side_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_sides_on_order_id` (`order_id`), INDEX `index_order_sides_on_side_id` (`side_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `orders` CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `orders` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `customer_name` varchar(255), `status` varchar(255), `total_amount` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `pizzas` CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `pizzas` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price_regular` decimal(10), `price_medium` decimal(10), `price_large` decimal(10), `crust_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `size` varchar(255), `category` varchar(255), INDEX `index_pizzas_on_crust_id` (`crust_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `pizzas_toppings` CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `pizzas_toppings` (`pizza_id` bigint NOT NULL, `topping_id` bigint NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `sides` CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `toppings` CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE `toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `is_vegetarian` tinyint(1), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (12.0ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_dc7b80a860`
FOREIGN KEY (`order_item_id`)
  REFERENCES `order_items` (`id`)
[0m
  [1m[35m (10.0ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_8bc35592b7`
FOREIGN KEY (`topping_id`)
  REFERENCES `toppings` (`id`)
[0m
  [1m[35m (15.8ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_e3cb28f071`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (13.3ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_d28b17c368`
FOREIGN KEY (`pizza_id`)
  REFERENCES `pizzas` (`id`)
[0m
  [1m[35m (16.8ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_1b467f8eca`
FOREIGN KEY (`side_id`)
  REFERENCES `sides` (`id`)
[0m
  [1m[35m (12.3ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_f0fe11be9c`
FOREIGN KEY (`topping_id`)
  REFERENCES `toppings` (`id`)
[0m
  [1m[35m (12.3ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_f8cb2d2624`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (10.9ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_fb4604d3fd`
FOREIGN KEY (`side_id`)
  REFERENCES `sides` (`id`)
[0m
  [1m[35m (12.3ms)[0m  [1m[35mALTER TABLE `pizzas` ADD CONSTRAINT `fk_rails_cd6ddc59bc`
FOREIGN KEY (`crust_id`)
  REFERENCES `crusts` (`id`)
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20250202175256)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20250202174017),
(20250202170450),
(20250202134356),
(20250202122640),
(20250202115634),
(20250202035725),
(20250202023936),
(20250201171514),
(20250201135626),
(20250201135608),
(20250201135559),
(20250201135547),
(20250201135537),
(20250201135526),
(20250201135428),
(20250201135417);[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2025-02-02 19:03:38.400609', '2025-02-02 19:03:38.400611')[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('schema_sha1', 'b7e17c6fac8f7c0d89d19b7b478c81244778909c', '2025-02-02 19:03:38.402213', '2025-02-02 19:03:38.402214')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPizza Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `pizzas` WHERE `pizzas`.`name` = 'Deluxe Veggie' LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPizza Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `pizzas` WHERE `pizzas`.`name` = 'Deluxe Veggie' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPizza Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `pizzas` WHERE `pizzas`.`name` = 'Deluxe Veggie' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (6.0ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.1ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:06:27.724376', '2025-02-03 02:06:27.724376'), (298486374, 'MyString', 9, '2025-02-03 02:06:27.724376', '2025-02-03 02:06:27.724376');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 1, 1, '2025-02-03 02:06:27.728007', '2025-02-03 02:06:27.728007'), (298486374, 'MyString', 1, 1, '2025-02-03 02:06:27.728007', '2025-02-03 02:06:27.728007');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (980190962, 'MyString', 9, 9, 9, 980190962, '2025-02-03 02:06:27.731279', '2025-02-03 02:06:27.731279', DEFAULT, DEFAULT), (298486374, 'MyString', 9, 9, 9, 298486374, '2025-02-03 02:06:27.731279', '2025-02-03 02:06:27.731279', DEFAULT, DEFAULT);
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:06:27.736169', '2025-02-03 02:06:27.736169'), (298486374, 'MyString', 9, '2025-02-03 02:06:27.736169', '2025-02-03 02:06:27.736169');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, FALSE, '2025-02-03 02:06:27.739025', '2025-02-03 02:06:27.739025'), (298486374, 'MyString', 9, FALSE, '2025-02-03 02:06:27.739025', '2025-02-03 02:06:27.739025')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:07:19.228260', '2025-02-03 02:07:19.228260'), (298486374, 'MyString', 9, '2025-02-03 02:07:19.228260', '2025-02-03 02:07:19.228260');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 1, 1, '2025-02-03 02:07:19.231413', '2025-02-03 02:07:19.231413'), (298486374, 'MyString', 1, 1, '2025-02-03 02:07:19.231413', '2025-02-03 02:07:19.231413');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (980190962, 'MyString', 9, 9, 9, 980190962, '2025-02-03 02:07:19.233612', '2025-02-03 02:07:19.233612', DEFAULT, DEFAULT), (298486374, 'MyString', 9, 9, 9, 298486374, '2025-02-03 02:07:19.233612', '2025-02-03 02:07:19.233612', DEFAULT, DEFAULT);
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:07:19.235813', '2025-02-03 02:07:19.235813'), (298486374, 'MyString', 9, '2025-02-03 02:07:19.235813', '2025-02-03 02:07:19.235813');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, FALSE, '2025-02-03 02:07:19.237680', '2025-02-03 02:07:19.237680'), (298486374, 'MyString', 9, FALSE, '2025-02-03 02:07:19.237680', '2025-02-03 02:07:19.237680')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:08:20.965547', '2025-02-03 02:08:20.965547'), (298486374, 'MyString', 9, '2025-02-03 02:08:20.965547', '2025-02-03 02:08:20.965547');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 1, 1, '2025-02-03 02:08:20.970330', '2025-02-03 02:08:20.970330'), (298486374, 'MyString', 1, 1, '2025-02-03 02:08:20.970330', '2025-02-03 02:08:20.970330');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (980190962, 'MyString', 9, 9, 9, 980190962, '2025-02-03 02:08:20.972079', '2025-02-03 02:08:20.972079', DEFAULT, DEFAULT), (298486374, 'MyString', 9, 9, 9, 298486374, '2025-02-03 02:08:20.972079', '2025-02-03 02:08:20.972079', DEFAULT, DEFAULT);
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, '2025-02-03 02:08:20.976364', '2025-02-03 02:08:20.976364'), (298486374, 'MyString', 9, '2025-02-03 02:08:20.976364', '2025-02-03 02:08:20.976364');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 9, FALSE, '2025-02-03 02:08:20.979428', '2025-02-03 02:08:20.979428'), (298486374, 'MyString', 9, FALSE, '2025-02-03 02:08:20.979428', '2025-02-03 02:08:20.979428')[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.0ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:13:34.618749', '2025-02-03 02:13:34.618749'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:13:34.618749', '2025-02-03 02:13:34.618749'), (3, 'Cheese Burst', 0, '2025-02-03 02:13:34.618749', '2025-02-03 02:13:34.618749'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:13:34.618749', '2025-02-03 02:13:34.618749');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (980190962, 'MyString', 1, 1, '2025-02-03 02:13:34.622774', '2025-02-03 02:13:34.622774'), (298486374, 'MyString', 1, 1, '2025-02-03 02:13:34.622774', '2025-02-03 02:13:34.622774');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:13:34.625596', '2025-02-03 02:13:34.625596', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:13:34.628928', '2025-02-03 02:13:34.628928'), (2, 'Mousse Cake', 90, '2025-02-03 02:13:34.628928', '2025-02-03 02:13:34.628928');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:13:34.632540', '2025-02-03 02:13:34.632540')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.4ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:15:00.820277', '2025-02-03 02:15:00.820277'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:15:00.820277', '2025-02-03 02:15:00.820277'), (3, 'Cheese Burst', 0, '2025-02-03 02:15:00.820277', '2025-02-03 02:15:00.820277'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:15:00.820277', '2025-02-03 02:15:00.820277');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:15:00.825906', '2025-02-03 02:15:00.825906', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:15:00.825906', '2025-02-03 02:15:00.825906', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:15:00.829711', '2025-02-03 02:15:00.829711'), (2, 1, 2, 1, '2025-02-03 02:15:00.829711', '2025-02-03 02:15:00.829711');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:15:00.833319', '2025-02-03 02:15:00.833319');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:15:00.836833', '2025-02-03 02:15:00.836833', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:15:00.840677', '2025-02-03 02:15:00.840677'), (2, 'Mousse Cake', 90, '2025-02-03 02:15:00.840677', '2025-02-03 02:15:00.840677');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:15:00.844321', '2025-02-03 02:15:00.844321')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT `orders`.* FROM `orders` WHERE `orders`.`id` = 1 LIMIT 1[0m
  [1m[36mOrderItem Load (0.2ms)[0m  [1m[34mSELECT `order_items`.* FROM `order_items` WHERE `order_items`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.9ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` INNER JOIN `order_item_toppings` ON `toppings`.`id` = `order_item_toppings`.`topping_id` WHERE `order_item_toppings`.`order_item_id` = 1 /* loading for inspect */ LIMIT 11[0m
  [1m[36mPizza Load (1.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.8ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mSide Load (0.7ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 07:46:07 +0530
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"customer_name"=>"Alice", "pizzas"=>[{"pizza_id"=>"1", "size"=>"Medium", "crust_id"=>"1"}], "sides"=>[{"side_id"=>"1", "quantity"=>"2"}]}}
Completed 500 Internal Server Error in 68096ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (8.4ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:20:11.492555', '2025-02-03 02:20:11.492555'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:20:11.492555', '2025-02-03 02:20:11.492555'), (3, 'Cheese Burst', 0, '2025-02-03 02:20:11.492555', '2025-02-03 02:20:11.492555'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:20:11.492555', '2025-02-03 02:20:11.492555');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:20:11.497054', '2025-02-03 02:20:11.497054', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:20:11.497054', '2025-02-03 02:20:11.497054', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:20:11.501030', '2025-02-03 02:20:11.501030'), (2, 1, 2, 1, '2025-02-03 02:20:11.501030', '2025-02-03 02:20:11.501030');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:20:11.504017', '2025-02-03 02:20:11.504017');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:20:11.507481', '2025-02-03 02:20:11.507481', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:20:11.510869', '2025-02-03 02:20:11.510869'), (2, 'Mousse Cake', 90, '2025-02-03 02:20:11.510869', '2025-02-03 02:20:11.510869');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:20:11.513762', '2025-02-03 02:20:11.513762')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 07:50:11 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (2.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.9ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (1.8ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (1.6ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.6ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.6ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 43677ms (ActiveRecord: 20.7ms (11 queries, 0 cached) | GC: 144.0ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.5ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:23:51.652189', '2025-02-03 02:23:51.652189'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:23:51.652189', '2025-02-03 02:23:51.652189'), (3, 'Cheese Burst', 0, '2025-02-03 02:23:51.652189', '2025-02-03 02:23:51.652189'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:23:51.652189', '2025-02-03 02:23:51.652189');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:23:51.656896', '2025-02-03 02:23:51.656896', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:23:51.656896', '2025-02-03 02:23:51.656896', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:23:51.660494', '2025-02-03 02:23:51.660494'), (2, 1, 2, 1, '2025-02-03 02:23:51.660494', '2025-02-03 02:23:51.660494');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:23:51.663978', '2025-02-03 02:23:51.663978');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:23:51.667349', '2025-02-03 02:23:51.667349', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:23:51.670905', '2025-02-03 02:23:51.670905'), (2, 'Mousse Cake', 90, '2025-02-03 02:23:51.670905', '2025-02-03 02:23:51.670905');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:23:51.674336', '2025-02-03 02:23:51.674336')[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 07:53:51 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (1.8ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.9ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.9ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (1.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mCACHE Topping Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mCACHE Topping Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mCACHE Topping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mCACHE Topping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.8ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (2.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 148708ms (ActiveRecord: 24.5ms (15 queries, 4 cached) | GC: 156.7ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.0ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:30:45.990370', '2025-02-03 02:30:45.990370'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:30:45.990370', '2025-02-03 02:30:45.990370'), (3, 'Cheese Burst', 0, '2025-02-03 02:30:45.990370', '2025-02-03 02:30:45.990370'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:30:45.990370', '2025-02-03 02:30:45.990370');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:30:45.996385', '2025-02-03 02:30:45.996385', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:30:45.996385', '2025-02-03 02:30:45.996385', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:30:45.998360', '2025-02-03 02:30:45.998360'), (2, 1, 2, 1, '2025-02-03 02:30:45.998360', '2025-02-03 02:30:45.998360');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:30:46.000182', '2025-02-03 02:30:46.000182');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:30:46.003080', '2025-02-03 02:30:46.003080', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:30:46.006197', '2025-02-03 02:30:46.006197'), (2, 'Mousse Cake', 90, '2025-02-03 02:30:46.006197', '2025-02-03 02:30:46.006197');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:30:46.008862', '2025-02-03 02:30:46.008862')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (1.0ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 08:00:46 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.6ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 23459ms (ActiveRecord: 13.8ms (11 queries, 0 cached) | GC: 34.5ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:34:12.462639', '2025-02-03 02:34:12.462639'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:34:12.462639', '2025-02-03 02:34:12.462639'), (3, 'Cheese Burst', 0, '2025-02-03 02:34:12.462639', '2025-02-03 02:34:12.462639'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:34:12.462639', '2025-02-03 02:34:12.462639');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:34:12.466912', '2025-02-03 02:34:12.466912', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:34:12.466912', '2025-02-03 02:34:12.466912', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:34:12.470453', '2025-02-03 02:34:12.470453'), (2, 1, 2, 1, '2025-02-03 02:34:12.470453', '2025-02-03 02:34:12.470453');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:34:12.473816', '2025-02-03 02:34:12.473816');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:34:12.476395', '2025-02-03 02:34:12.476395', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:34:12.478818', '2025-02-03 02:34:12.478818'), (2, 'Mousse Cake', 90, '2025-02-03 02:34:12.478818', '2025-02-03 02:34:12.478818');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:34:12.481436', '2025-02-03 02:34:12.481436')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 08:04:12 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (1.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.4ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (2.9ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 16580ms (ActiveRecord: 11.8ms (11 queries, 0 cached) | GC: 36.0ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.4ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 02:35:17.084739', '2025-02-03 02:35:17.084739'), (2, 'Wheat Thin Crust', 0, '2025-02-03 02:35:17.084739', '2025-02-03 02:35:17.084739'), (3, 'Cheese Burst', 0, '2025-02-03 02:35:17.084739', '2025-02-03 02:35:17.084739'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 02:35:17.084739', '2025-02-03 02:35:17.084739');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 02:35:17.089572', '2025-02-03 02:35:17.089572', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 02:35:17.089572', '2025-02-03 02:35:17.089572', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 02:35:17.092970', '2025-02-03 02:35:17.092970'), (2, 1, 2, 1, '2025-02-03 02:35:17.092970', '2025-02-03 02:35:17.092970');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 02:35:17.095853', '2025-02-03 02:35:17.095853');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 02:35:17.099457', '2025-02-03 02:35:17.099457', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 02:35:17.102796', '2025-02-03 02:35:17.102796'), (2, 'Mousse Cake', 90, '2025-02-03 02:35:17.102796', '2025-02-03 02:35:17.102796');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (2, 'Capsicum', 25, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (3, 'Paneer', 35, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (4, 'Mushroom', 30, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 02:35:17.106552', '2025-02-03 02:35:17.106552')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 08:05:17 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.6ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.6ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.6ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3281713ms (ActiveRecord: 20.4ms (11 queries, 0 cached) | GC: 77.4ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (7.2ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 03:31:29.821151', '2025-02-03 03:31:29.821151'), (2, 'Wheat Thin Crust', 0, '2025-02-03 03:31:29.821151', '2025-02-03 03:31:29.821151'), (3, 'Cheese Burst', 0, '2025-02-03 03:31:29.821151', '2025-02-03 03:31:29.821151'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 03:31:29.821151', '2025-02-03 03:31:29.821151');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 03:31:29.825231', '2025-02-03 03:31:29.825231', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 03:31:29.825231', '2025-02-03 03:31:29.825231', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 03:31:29.829053', '2025-02-03 03:31:29.829053'), (2, 1, 2, 1, '2025-02-03 03:31:29.829053', '2025-02-03 03:31:29.829053');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 03:31:29.832354', '2025-02-03 03:31:29.832354');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 03:31:29.835352', '2025-02-03 03:31:29.835352', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 03:31:29.839470', '2025-02-03 03:31:29.839470'), (2, 'Mousse Cake', 90, '2025-02-03 03:31:29.839470', '2025-02-03 03:31:29.839470');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (2, 'Capsicum', 25, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (3, 'Paneer', 35, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (4, 'Mushroom', 30, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 03:31:29.842538', '2025-02-03 03:31:29.842538')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:01:29 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.4ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 9999ms (ActiveRecord: 13.6ms (11 queries, 0 cached) | GC: 34.2ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 03:36:42.259981', '2025-02-03 03:36:42.259981'), (2, 'Wheat Thin Crust', 0, '2025-02-03 03:36:42.259981', '2025-02-03 03:36:42.259981'), (3, 'Cheese Burst', 0, '2025-02-03 03:36:42.259981', '2025-02-03 03:36:42.259981'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 03:36:42.259981', '2025-02-03 03:36:42.259981');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 03:36:42.265107', '2025-02-03 03:36:42.265107', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 03:36:42.265107', '2025-02-03 03:36:42.265107', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 03:36:42.268936', '2025-02-03 03:36:42.268936'), (2, 1, 2, 1, '2025-02-03 03:36:42.268936', '2025-02-03 03:36:42.268936');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 03:36:42.272516', '2025-02-03 03:36:42.272516');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 03:36:42.275509', '2025-02-03 03:36:42.275509', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 03:36:42.278992', '2025-02-03 03:36:42.278992'), (2, 'Mousse Cake', 90, '2025-02-03 03:36:42.278992', '2025-02-03 03:36:42.278992');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (2, 'Capsicum', 25, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (3, 'Paneer', 35, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (4, 'Mushroom', 30, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 03:36:42.282231', '2025-02-03 03:36:42.282231')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:06:42 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (1.7ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.9ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (1.9ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.7ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (1.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 161232ms (ActiveRecord: 15.1ms (11 queries, 0 cached) | GC: 90.5ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 03:41:42.825079', '2025-02-03 03:41:42.825079'), (2, 'Wheat Thin Crust', 0, '2025-02-03 03:41:42.825079', '2025-02-03 03:41:42.825079'), (3, 'Cheese Burst', 0, '2025-02-03 03:41:42.825079', '2025-02-03 03:41:42.825079'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 03:41:42.825079', '2025-02-03 03:41:42.825079');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 03:41:42.830267', '2025-02-03 03:41:42.830267', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 03:41:42.830267', '2025-02-03 03:41:42.830267', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 03:41:42.833882', '2025-02-03 03:41:42.833882'), (2, 1, 2, 1, '2025-02-03 03:41:42.833882', '2025-02-03 03:41:42.833882');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 03:41:42.837098', '2025-02-03 03:41:42.837098');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 03:41:42.839781', '2025-02-03 03:41:42.839781', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 03:41:42.842574', '2025-02-03 03:41:42.842574'), (2, 'Mousse Cake', 90, '2025-02-03 03:41:42.842574', '2025-02-03 03:41:42.842574');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (2, 'Capsicum', 25, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (3, 'Paneer', 35, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (4, 'Mushroom', 30, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 03:41:42.845227', '2025-02-03 03:41:42.845227')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:11:42 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (1.9ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 03:41:45.417646', '2025-02-03 03:41:45.417646')[0m
  [1m[36mTopping Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (2, 1, NULL, NULL, 1, '2025-02-03 03:41:45.426271', '2025-02-03 03:41:45.426271', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (1.1ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 2, '2025-02-03 03:41:45.428107', '2025-02-03 03:41:45.428107')[0m
  [1m[36mOrderItemTopping Create (0.4ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 3, '2025-02-03 03:41:45.430001', '2025-02-03 03:41:45.430001')[0m
  [1m[36mOrderSide Create (0.4ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2025-02-03 03:41:45.431454', '2025-02-03 03:41:45.431454')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (1.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 16648ms (ActiveRecord: 17.9ms (14 queries, 0 cached) | GC: 29.2ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.6ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 03:42:12.161174', '2025-02-03 03:42:12.161174'), (2, 'Wheat Thin Crust', 0, '2025-02-03 03:42:12.161174', '2025-02-03 03:42:12.161174'), (3, 'Cheese Burst', 0, '2025-02-03 03:42:12.161174', '2025-02-03 03:42:12.161174'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 03:42:12.161174', '2025-02-03 03:42:12.161174');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 03:42:12.165324', '2025-02-03 03:42:12.165324', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 03:42:12.165324', '2025-02-03 03:42:12.165324', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 03:42:12.168319', '2025-02-03 03:42:12.168319'), (2, 1, 2, 1, '2025-02-03 03:42:12.168319', '2025-02-03 03:42:12.168319');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 03:42:12.173361', '2025-02-03 03:42:12.173361');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 03:42:12.176786', '2025-02-03 03:42:12.176786', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 03:42:12.180139', '2025-02-03 03:42:12.180139'), (2, 'Mousse Cake', 90, '2025-02-03 03:42:12.180139', '2025-02-03 03:42:12.180139');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (2, 'Capsicum', 25, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (3, 'Paneer', 35, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (4, 'Mushroom', 30, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 03:42:12.182576', '2025-02-03 03:42:12.182576')[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:12:12 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (1.5ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 03:42:13.547475', '2025-02-03 03:42:13.547475')[0m
  [1m[36mTopping Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.5ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (3, 1, NULL, NULL, 1, '2025-02-03 03:42:13.555696', '2025-02-03 03:42:13.555696', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.6ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (4, 2, '2025-02-03 03:42:13.557217', '2025-02-03 03:42:13.557217')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (4, 3, '2025-02-03 03:42:13.558441', '2025-02-03 03:42:13.558441')[0m
  [1m[36mOrderSide Create (0.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (3, 1, 2, '2025-02-03 03:42:13.559673', '2025-02-03 03:42:13.559673')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (1.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` /* loading for inspect */ LIMIT 11[0m
Completed 500 Internal Server Error in 1069168ms (ActiveRecord: 18.0ms (15 queries, 0 cached) | GC: 33.2ms)
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.1ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:06:31.523024', '2025-02-03 04:06:31.523024'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:06:31.523024', '2025-02-03 04:06:31.523024'), (3, 'Cheese Burst', 0, '2025-02-03 04:06:31.523024', '2025-02-03 04:06:31.523024'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:06:31.523024', '2025-02-03 04:06:31.523024');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:06:31.527756', '2025-02-03 04:06:31.527756', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:06:31.527756', '2025-02-03 04:06:31.527756', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:06:31.531528', '2025-02-03 04:06:31.531528'), (2, 1, 2, 1, '2025-02-03 04:06:31.531528', '2025-02-03 04:06:31.531528');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:06:31.535061', '2025-02-03 04:06:31.535061');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:06:31.538217', '2025-02-03 04:06:31.538217', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:06:31.540694', '2025-02-03 04:06:31.540694'), (2, 'Mousse Cake', 90, '2025-02-03 04:06:31.540694', '2025-02-03 04:06:31.540694');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:06:31.544117', '2025-02-03 04:06:31.544117')[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:36:31 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (1.6ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:08:28.902361', '2025-02-03 04:08:28.902361')[0m
  [1m[36mTopping Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.7ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (4, 1, NULL, NULL, 1, '2025-02-03 04:08:28.909915', '2025-02-03 04:08:28.909915', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.8ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (5, 2, '2025-02-03 04:08:28.911854', '2025-02-03 04:08:28.911854')[0m
  [1m[36mOrderItemTopping Create (0.4ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (5, 3, '2025-02-03 04:08:28.914063', '2025-02-03 04:08:28.914063')[0m
  [1m[36mOrderSide Create (0.4ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (4, 1, 2, '2025-02-03 04:08:28.915453', '2025-02-03 04:08:28.915453')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (2.4ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:08:29.626179' WHERE `orders`.`id` = 4[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 118027ms (Views: 0.7ms | ActiveRecord: 16.3ms (14 queries, 0 cached) | GC: 29.7ms)
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.1ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:11:10.613958', '2025-02-03 04:11:10.613958'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:11:10.613958', '2025-02-03 04:11:10.613958'), (3, 'Cheese Burst', 0, '2025-02-03 04:11:10.613958', '2025-02-03 04:11:10.613958'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:11:10.613958', '2025-02-03 04:11:10.613958');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:11:10.617298', '2025-02-03 04:11:10.617298', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:11:10.617298', '2025-02-03 04:11:10.617298', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:11:10.621981', '2025-02-03 04:11:10.621981'), (2, 1, 2, 1, '2025-02-03 04:11:10.621981', '2025-02-03 04:11:10.621981');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:11:10.624455', '2025-02-03 04:11:10.624455');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:11:10.629803', '2025-02-03 04:11:10.629803', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:11:10.632474', '2025-02-03 04:11:10.632474'), (2, 'Mousse Cake', 90, '2025-02-03 04:11:10.632474', '2025-02-03 04:11:10.632474');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:11:10.635949', '2025-02-03 04:11:10.635949')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.5ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:41:10 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.9ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.6ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (1.4ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:11:43.468633', '2025-02-03 04:11:43.468633')[0m
  [1m[36mTopping Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (1.1ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (5, 1, NULL, NULL, 1, '2025-02-03 04:11:43.479657', '2025-02-03 04:11:43.479657', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.5ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (6, 2, '2025-02-03 04:11:43.481904', '2025-02-03 04:11:43.481904')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (6, 3, '2025-02-03 04:11:43.483146', '2025-02-03 04:11:43.483146')[0m
  [1m[36mOrderSide Create (0.6ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (5, 1, 2, '2025-02-03 04:11:43.484096', '2025-02-03 04:11:43.484096')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (1.3ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:11:44.896753' WHERE `orders`.`id` = 5[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 34196ms (Views: 0.4ms | ActiveRecord: 14.9ms (14 queries, 0 cached) | GC: 34.8ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.1ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:12:38.100137', '2025-02-03 04:12:38.100137'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:12:38.100137', '2025-02-03 04:12:38.100137'), (3, 'Cheese Burst', 0, '2025-02-03 04:12:38.100137', '2025-02-03 04:12:38.100137'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:12:38.100137', '2025-02-03 04:12:38.100137');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:12:38.105280', '2025-02-03 04:12:38.105280', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:12:38.105280', '2025-02-03 04:12:38.105280', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:12:38.109321', '2025-02-03 04:12:38.109321'), (2, 1, 2, 1, '2025-02-03 04:12:38.109321', '2025-02-03 04:12:38.109321');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:12:38.113336', '2025-02-03 04:12:38.113336');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:12:38.116088', '2025-02-03 04:12:38.116088', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:12:38.119728', '2025-02-03 04:12:38.119728'), (2, 'Mousse Cake', 90, '2025-02-03 04:12:38.119728', '2025-02-03 04:12:38.119728');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:12:38.124845', '2025-02-03 04:12:38.124845')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:42:38 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:12:38.217181', '2025-02-03 04:12:38.217181')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (6, 1, NULL, NULL, 1, '2025-02-03 04:12:38.218976', '2025-02-03 04:12:38.218976', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (7, 2, '2025-02-03 04:12:38.219577', '2025-02-03 04:12:38.219577')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (7, 3, '2025-02-03 04:12:38.220102', '2025-02-03 04:12:38.220102')[0m
  [1m[36mOrderSide Create (0.9ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (6, 1, 2, '2025-02-03 04:12:38.220594', '2025-02-03 04:12:38.220594')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` ORDER BY `inventories`.`id` ASC LIMIT 1[0m
  [1m[36mInventory Load (1.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 95380ms (ActiveRecord: 14.1ms (15 queries, 0 cached) | GC: 31.3ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.5ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:14:17.657173', '2025-02-03 04:14:17.657173'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:14:17.657173', '2025-02-03 04:14:17.657173'), (3, 'Cheese Burst', 0, '2025-02-03 04:14:17.657173', '2025-02-03 04:14:17.657173'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:14:17.657173', '2025-02-03 04:14:17.657173');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848'), (710829354, 'Crust', 1, 15, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848'), (82186631, 'Topping', 3, 20, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848'), (1004639449, 'Topping', 2, 25, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848'), (192233476, 'Side', 1, 30, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848'), (990217510, 'Side', 2, 20, '2025-02-03 04:14:17.663848', '2025-02-03 04:14:17.663848');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:14:17.668864', '2025-02-03 04:14:17.668864', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:14:17.668864', '2025-02-03 04:14:17.668864', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:14:17.672901', '2025-02-03 04:14:17.672901'), (2, 1, 2, 1, '2025-02-03 04:14:17.672901', '2025-02-03 04:14:17.672901');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:14:17.676161', '2025-02-03 04:14:17.676161');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:14:17.679679', '2025-02-03 04:14:17.679679', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:14:17.682903', '2025-02-03 04:14:17.682903'), (2, 'Mousse Cake', 90, '2025-02-03 04:14:17.682903', '2025-02-03 04:14:17.682903');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:14:17.684763', '2025-02-03 04:14:17.684763')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:44:17 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (2.9ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:14:17.791155', '2025-02-03 04:14:17.791155')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (7, 1, NULL, NULL, 1, '2025-02-03 04:14:17.792972', '2025-02-03 04:14:17.792972', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (8, 2, '2025-02-03 04:14:17.793573', '2025-02-03 04:14:17.793573')[0m
  [1m[36mOrderItemTopping Create (0.1ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (8, 3, '2025-02-03 04:14:17.794058', '2025-02-03 04:14:17.794058')[0m
  [1m[36mOrderSide Create (0.2ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (7, 1, 2, '2025-02-03 04:14:17.794521', '2025-02-03 04:14:17.794521')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (1.8ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mCACHE Inventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 04:18:07.818720' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 04:18:07.823659' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.1ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 04:18:07.826445' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 04:18:07.829217' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (3.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 04:18:07.835158' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:18:07.837622' WHERE `orders`.`id` = 7[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 230093ms (Views: 0.6ms | ActiveRecord: 24.3ms (25 queries, 1 cached) | GC: 32.7ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.0ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:18:10.492464', '2025-02-03 04:18:10.492464'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:18:10.492464', '2025-02-03 04:18:10.492464'), (3, 'Cheese Burst', 0, '2025-02-03 04:18:10.492464', '2025-02-03 04:18:10.492464'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:18:10.492464', '2025-02-03 04:18:10.492464');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365'), (710829354, 'Crust', 1, 15, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365'), (82186631, 'Topping', 3, 20, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365'), (1004639449, 'Topping', 2, 25, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365'), (192233476, 'Side', 1, 30, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365'), (990217510, 'Side', 2, 20, '2025-02-03 04:18:10.497365', '2025-02-03 04:18:10.497365');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:18:10.501201', '2025-02-03 04:18:10.501201', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:18:10.501201', '2025-02-03 04:18:10.501201', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:18:10.505140', '2025-02-03 04:18:10.505140'), (2, 1, 2, 1, '2025-02-03 04:18:10.505140', '2025-02-03 04:18:10.505140');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:18:10.508202', '2025-02-03 04:18:10.508202');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:18:10.511774', '2025-02-03 04:18:10.511774', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:18:10.515014', '2025-02-03 04:18:10.515014'), (2, 'Mousse Cake', 90, '2025-02-03 04:18:10.515014', '2025-02-03 04:18:10.515014');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:18:10.518285', '2025-02-03 04:18:10.518285')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:48:10 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (8.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:18:10.620389', '2025-02-03 04:18:10.620389')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (8, 1, NULL, NULL, 1, '2025-02-03 04:18:10.622177', '2025-02-03 04:18:10.622177', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (9, 2, '2025-02-03 04:18:10.622836', '2025-02-03 04:18:10.622836')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (9, 3, '2025-02-03 04:18:10.623419', '2025-02-03 04:18:10.623419')[0m
  [1m[36mOrderSide Create (0.2ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (8, 1, 2, '2025-02-03 04:18:10.624041', '2025-02-03 04:18:10.624041')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (1.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` /* loading for inspect */ LIMIT 11[0m
  [1m[36mInventory Load (1.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories`[0m
  [1m[36mInventory Load (1.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 04:18:54.573181' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.8ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 04:18:54.577283' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.7ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 04:18:54.580163' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 04:18:54.582350' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.8ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 04:18:54.584560' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:18:54.586515' WHERE `orders`.`id` = 8[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 44010ms (Views: 0.5ms | ActiveRecord: 30.2ms (26 queries, 0 cached) | GC: 29.4ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (5.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.6ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:19:33.473213', '2025-02-03 04:19:33.473213'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:19:33.473213', '2025-02-03 04:19:33.473213'), (3, 'Cheese Burst', 0, '2025-02-03 04:19:33.473213', '2025-02-03 04:19:33.473213'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:19:33.473213', '2025-02-03 04:19:33.473213');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712'), (710829354, 'Crust', 1, 15, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712'), (82186631, 'Topping', 3, 20, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712'), (1004639449, 'Topping', 2, 25, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712'), (192233476, 'Side', 1, 30, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712'), (990217510, 'Side', 2, 20, '2025-02-03 04:19:33.476712', '2025-02-03 04:19:33.476712');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:19:33.480326', '2025-02-03 04:19:33.480326', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:19:33.480326', '2025-02-03 04:19:33.480326', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:19:33.483452', '2025-02-03 04:19:33.483452'), (2, 1, 2, 1, '2025-02-03 04:19:33.483452', '2025-02-03 04:19:33.483452');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:19:33.486424', '2025-02-03 04:19:33.486424');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:19:33.489513', '2025-02-03 04:19:33.489513', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:19:33.493204', '2025-02-03 04:19:33.493204'), (2, 'Mousse Cake', 90, '2025-02-03 04:19:33.493204', '2025-02-03 04:19:33.493204');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:19:33.496180', '2025-02-03 04:19:33.496180')[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:49:33 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.6ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:19:33.603889', '2025-02-03 04:19:33.603889')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (9, 1, NULL, NULL, 1, '2025-02-03 04:19:33.605853', '2025-02-03 04:19:33.605853', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (10, 2, '2025-02-03 04:19:33.606515', '2025-02-03 04:19:33.606515')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (10, 3, '2025-02-03 04:19:33.607013', '2025-02-03 04:19:33.607013')[0m
  [1m[36mOrderSide Create (0.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (9, 1, 2, '2025-02-03 04:19:33.607569', '2025-02-03 04:19:33.607569')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (1.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 04:19:35.976956' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 04:19:35.981370' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.6ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 04:19:35.984664' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 04:19:35.987327' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 04:19:35.989116' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:19:35.990436' WHERE `orders`.`id` = 9[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2429ms (Views: 0.5ms | ActiveRecord: 18.8ms (24 queries, 0 cached) | GC: 30.5ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.2ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:25:50.566814', '2025-02-03 04:25:50.566814'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:25:50.566814', '2025-02-03 04:25:50.566814'), (3, 'Cheese Burst', 0, '2025-02-03 04:25:50.566814', '2025-02-03 04:25:50.566814'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:25:50.566814', '2025-02-03 04:25:50.566814');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708'), (710829354, 'Crust', 1, 15, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708'), (82186631, 'Topping', 3, 20, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708'), (1004639449, 'Topping', 2, 25, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708'), (192233476, 'Side', 1, 30, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708'), (990217510, 'Side', 2, 20, '2025-02-03 04:25:50.571708', '2025-02-03 04:25:50.571708');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:25:50.574873', '2025-02-03 04:25:50.574873', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:25:50.574873', '2025-02-03 04:25:50.574873', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:25:50.579331', '2025-02-03 04:25:50.579331'), (2, 1, 2, 1, '2025-02-03 04:25:50.579331', '2025-02-03 04:25:50.579331');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:25:50.582127', '2025-02-03 04:25:50.582127');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:25:50.583940', '2025-02-03 04:25:50.583940', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:25:50.587145', '2025-02-03 04:25:50.587145'), (2, 'Mousse Cake', 90, '2025-02-03 04:25:50.587145', '2025-02-03 04:25:50.587145');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:25:50.588801', '2025-02-03 04:25:50.588801')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.8ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:55:50 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:25:50.691111', '2025-02-03 04:25:50.691111')[0m
  [1m[36mTopping Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (10, 1, NULL, NULL, 1, '2025-02-03 04:25:50.693919', '2025-02-03 04:25:50.693919', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (11, 2, '2025-02-03 04:25:50.694698', '2025-02-03 04:25:50.694698')[0m
  [1m[36mOrderItemTopping Create (0.4ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (11, 3, '2025-02-03 04:25:50.695206', '2025-02-03 04:25:50.695206')[0m
  [1m[36mOrderSide Create (0.5ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (10, 1, 2, '2025-02-03 04:25:50.696532', '2025-02-03 04:25:50.696532')[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (1.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (2.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 04:25:51.943596' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 04:25:51.949097' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.7ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 04:25:51.952524' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 04:25:51.954832' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 04:25:51.956628' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:25:51.957934' WHERE `orders`.`id` = 10[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 1308ms (Views: 0.5ms | ActiveRecord: 23.0ms (24 queries, 0 cached) | GC: 31.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.6ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 04:26:10.715305', '2025-02-03 04:26:10.715305'), (2, 'Wheat Thin Crust', 0, '2025-02-03 04:26:10.715305', '2025-02-03 04:26:10.715305'), (3, 'Cheese Burst', 0, '2025-02-03 04:26:10.715305', '2025-02-03 04:26:10.715305'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 04:26:10.715305', '2025-02-03 04:26:10.715305');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634'), (710829354, 'Crust', 1, 15, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634'), (82186631, 'Topping', 3, 20, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634'), (1004639449, 'Topping', 2, 25, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634'), (192233476, 'Side', 1, 30, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634'), (990217510, 'Side', 2, 20, '2025-02-03 04:26:10.720634', '2025-02-03 04:26:10.720634');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 04:26:10.724135', '2025-02-03 04:26:10.724135', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 04:26:10.724135', '2025-02-03 04:26:10.724135', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 04:26:10.727874', '2025-02-03 04:26:10.727874'), (2, 1, 2, 1, '2025-02-03 04:26:10.727874', '2025-02-03 04:26:10.727874');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 04:26:10.730902', '2025-02-03 04:26:10.730902');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 04:26:10.734363', '2025-02-03 04:26:10.734363', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 04:26:10.737853', '2025-02-03 04:26:10.737853'), (2, 'Mousse Cake', 90, '2025-02-03 04:26:10.737853', '2025-02-03 04:26:10.737853');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (2, 'Capsicum', 25, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (3, 'Paneer', 35, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (4, 'Mushroom', 30, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 04:26:10.740760', '2025-02-03 04:26:10.740760')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 09:56:10 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (9.6ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 04:26:10.842841', '2025-02-03 04:26:10.842841')[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (11, 1, NULL, NULL, 1, '2025-02-03 04:26:10.844941', '2025-02-03 04:26:10.844941', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (12, 2, '2025-02-03 04:26:10.845613', '2025-02-03 04:26:10.845613')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (12, 3, '2025-02-03 04:26:10.846088', '2025-02-03 04:26:10.846088')[0m
  [1m[36mOrderSide Create (0.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (11, 1, 2, '2025-02-03 04:26:10.846603', '2025-02-03 04:26:10.846603')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 04:26:10.848279' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 04:26:10.850140' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.8ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 04:26:10.852174' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 04:26:10.855116' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.8ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 04:26:10.856255' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.9ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 04:26:10.858537' WHERE `orders`.`id` = 11[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 58ms (Views: 0.2ms | ActiveRecord: 29.8ms (24 queries, 0 cached) | GC: 10.1ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.8ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:39:41.526465', '2025-02-03 05:39:41.526465'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:39:41.526465', '2025-02-03 05:39:41.526465'), (3, 'Cheese Burst', 0, '2025-02-03 05:39:41.526465', '2025-02-03 05:39:41.526465'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:39:41.526465', '2025-02-03 05:39:41.526465');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577'), (710829354, 'Crust', 1, 15, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577'), (82186631, 'Topping', 3, 20, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577'), (192233476, 'Side', 1, 30, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577'), (990217510, 'Side', 2, 20, '2025-02-03 05:39:41.532577', '2025-02-03 05:39:41.532577');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:39:41.536048', '2025-02-03 05:39:41.536048', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:39:41.536048', '2025-02-03 05:39:41.536048', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:39:41.538806', '2025-02-03 05:39:41.538806'), (2, 1, 2, 1, '2025-02-03 05:39:41.538806', '2025-02-03 05:39:41.538806');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:39:41.541390', '2025-02-03 05:39:41.541390');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:39:41.544492', '2025-02-03 05:39:41.544492', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:39:41.548095', '2025-02-03 05:39:41.548095'), (2, 'Mousse Cake', 90, '2025-02-03 05:39:41.548095', '2025-02-03 05:39:41.548095');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:39:41.551675', '2025-02-03 05:39:41.551675')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:09:41 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.6ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (1.4ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:39:41.658847', '2025-02-03 05:39:41.658847')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (12, 1, NULL, NULL, 1, '2025-02-03 05:39:41.662041', '2025-02-03 05:39:41.662041', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (13, 2, '2025-02-03 05:39:41.662624', '2025-02-03 05:39:41.662624')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (13, 3, '2025-02-03 05:39:41.663115', '2025-02-03 05:39:41.663115')[0m
  [1m[36mOrderSide Create (0.5ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (12, 1, 2, '2025-02-03 05:39:41.663799', '2025-02-03 05:39:41.663799')[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (3.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:39:41.667179' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.7ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:39:41.671562' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:39:41.673182' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:39:41.675457' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:39:41.676473' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:39:41.677239' WHERE `orders`.`id` = 12[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 62ms (Views: 0.2ms | ActiveRecord: 25.0ms (29 queries, 0 cached) | GC: 9.2ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.4ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:45:11.199825', '2025-02-03 05:45:11.199825'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:45:11.199825', '2025-02-03 05:45:11.199825'), (3, 'Cheese Burst', 0, '2025-02-03 05:45:11.199825', '2025-02-03 05:45:11.199825'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:45:11.199825', '2025-02-03 05:45:11.199825');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436'), (710829354, 'Crust', 1, 15, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436'), (82186631, 'Topping', 3, 20, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436'), (192233476, 'Side', 1, 30, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436'), (990217510, 'Side', 2, 20, '2025-02-03 05:45:11.203436', '2025-02-03 05:45:11.203436');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:45:11.205858', '2025-02-03 05:45:11.205858', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:45:11.205858', '2025-02-03 05:45:11.205858', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:45:11.209618', '2025-02-03 05:45:11.209618'), (2, 1, 2, 1, '2025-02-03 05:45:11.209618', '2025-02-03 05:45:11.209618');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:45:11.213030', '2025-02-03 05:45:11.213030');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:45:11.216633', '2025-02-03 05:45:11.216633', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:45:11.220004', '2025-02-03 05:45:11.220004'), (2, 'Mousse Cake', 90, '2025-02-03 05:45:11.220004', '2025-02-03 05:45:11.220004');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:45:11.223691', '2025-02-03 05:45:11.223691')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:15:11 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.6ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:45:11.320938', '2025-02-03 05:45:11.320938')[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (13, 1, NULL, NULL, 1, '2025-02-03 05:45:11.324934', '2025-02-03 05:45:11.324934', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (14, 2, '2025-02-03 05:45:11.325679', '2025-02-03 05:45:11.325679')[0m
  [1m[36mOrderItemTopping Create (0.9ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (14, 3, '2025-02-03 05:45:11.326159', '2025-02-03 05:45:11.326159')[0m
  [1m[36mOrderSide Create (1.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (13, 1, 2, '2025-02-03 05:45:11.327389', '2025-02-03 05:45:11.327389')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:45:11.329736' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:45:11.330989' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.7ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:45:11.332553' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:45:11.334120' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:45:11.335183' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:45:11.336337' WHERE `orders`.`id` = 13[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 60ms (Views: 0.2ms | ActiveRecord: 19.8ms (29 queries, 0 cached) | GC: 10.2ms)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (1.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.6ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:47:12.149179', '2025-02-03 05:47:12.149179'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:47:12.149179', '2025-02-03 05:47:12.149179'), (3, 'Cheese Burst', 0, '2025-02-03 05:47:12.149179', '2025-02-03 05:47:12.149179'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:47:12.149179', '2025-02-03 05:47:12.149179');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591'), (710829354, 'Crust', 1, 15, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591'), (82186631, 'Topping', 3, 20, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591'), (192233476, 'Side', 1, 30, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591'), (990217510, 'Side', 2, 20, '2025-02-03 05:47:12.153591', '2025-02-03 05:47:12.153591');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:47:12.157176', '2025-02-03 05:47:12.157176', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:47:12.157176', '2025-02-03 05:47:12.157176', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:47:12.160749', '2025-02-03 05:47:12.160749'), (2, 1, 2, 1, '2025-02-03 05:47:12.160749', '2025-02-03 05:47:12.160749');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:47:12.163077', '2025-02-03 05:47:12.163077');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:47:12.166228', '2025-02-03 05:47:12.166228', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:47:12.168837', '2025-02-03 05:47:12.168837'), (2, 'Mousse Cake', 90, '2025-02-03 05:47:12.168837', '2025-02-03 05:47:12.168837');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:47:12.170849', '2025-02-03 05:47:12.170849')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:17:12 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.5ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:47:12.259602', '2025-02-03 05:47:12.259602')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.4ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (14, 1, NULL, NULL, 1, '2025-02-03 05:47:12.263387', '2025-02-03 05:47:12.263387', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (15, 2, '2025-02-03 05:47:12.264511', '2025-02-03 05:47:12.264511')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (15, 3, '2025-02-03 05:47:12.265126', '2025-02-03 05:47:12.265126')[0m
  [1m[36mOrderSide Create (0.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (14, 1, 2, '2025-02-03 05:47:12.265851', '2025-02-03 05:47:12.265851')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:47:12.267255' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.7ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:47:12.268581' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.0ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:47:12.270247' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:47:12.272171' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:47:12.273294' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:47:12.274096' WHERE `orders`.`id` = 14[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 55ms (Views: 0.2ms | ActiveRecord: 17.4ms (29 queries, 0 cached) | GC: 10.5ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:17:12 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (ActiveRecord: 1.2ms (4 queries, 0 cached) | GC: 0.1ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.8ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:47:27.053377', '2025-02-03 05:47:27.053377'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:47:27.053377', '2025-02-03 05:47:27.053377'), (3, 'Cheese Burst', 0, '2025-02-03 05:47:27.053377', '2025-02-03 05:47:27.053377'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:47:27.053377', '2025-02-03 05:47:27.053377');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261'), (710829354, 'Crust', 1, 15, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261'), (82186631, 'Topping', 3, 20, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261'), (192233476, 'Side', 1, 30, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261'), (990217510, 'Side', 2, 20, '2025-02-03 05:47:27.056261', '2025-02-03 05:47:27.056261');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:47:27.058113', '2025-02-03 05:47:27.058113', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:47:27.058113', '2025-02-03 05:47:27.058113', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:47:27.060924', '2025-02-03 05:47:27.060924'), (2, 1, 2, 1, '2025-02-03 05:47:27.060924', '2025-02-03 05:47:27.060924');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:47:27.063805', '2025-02-03 05:47:27.063805');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:47:27.065432', '2025-02-03 05:47:27.065432', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:47:27.067156', '2025-02-03 05:47:27.067156'), (2, 'Mousse Cake', 90, '2025-02-03 05:47:27.067156', '2025-02-03 05:47:27.067156');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:47:27.068937', '2025-02-03 05:47:27.068937')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:17:27 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.6ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:47:27.170573', '2025-02-03 05:47:27.170573')[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.6ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (15, 1, NULL, NULL, 1, '2025-02-03 05:47:27.174757', '2025-02-03 05:47:27.174757', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (16, 2, '2025-02-03 05:47:27.175729', '2025-02-03 05:47:27.175729')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (16, 3, '2025-02-03 05:47:27.176238', '2025-02-03 05:47:27.176238')[0m
  [1m[36mOrderSide Create (0.6ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (15, 1, 2, '2025-02-03 05:47:27.176790', '2025-02-03 05:47:27.176790')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:47:27.178748' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:47:27.180234' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:47:27.181310' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:47:27.182324' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:47:27.183345' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:47:27.184140' WHERE `orders`.`id` = 15[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 55ms (Views: 0.2ms | ActiveRecord: 16.5ms (29 queries, 0 cached) | GC: 9.2ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:17:27 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 7ms (ActiveRecord: 2.7ms (4 queries, 0 cached) | GC: 2.7ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (2.4ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:50:03.685797', '2025-02-03 05:50:03.685797'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:50:03.685797', '2025-02-03 05:50:03.685797'), (3, 'Cheese Burst', 0, '2025-02-03 05:50:03.685797', '2025-02-03 05:50:03.685797'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:50:03.685797', '2025-02-03 05:50:03.685797');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236'), (710829354, 'Crust', 1, 15, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236'), (82186631, 'Topping', 3, 20, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236'), (192233476, 'Side', 1, 30, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236'), (990217510, 'Side', 2, 20, '2025-02-03 05:50:03.690236', '2025-02-03 05:50:03.690236');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:50:03.694155', '2025-02-03 05:50:03.694155', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:50:03.694155', '2025-02-03 05:50:03.694155', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:50:03.696966', '2025-02-03 05:50:03.696966'), (2, 1, 2, 1, '2025-02-03 05:50:03.696966', '2025-02-03 05:50:03.696966');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:50:03.699379', '2025-02-03 05:50:03.699379');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:50:03.701403', '2025-02-03 05:50:03.701403', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:50:03.703833', '2025-02-03 05:50:03.703833'), (2, 'Mousse Cake', 90, '2025-02-03 05:50:03.703833', '2025-02-03 05:50:03.703833');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:50:03.706213', '2025-02-03 05:50:03.706213')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:20:03 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (8.0ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:50:03.805381', '2025-02-03 05:50:03.805381')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (16, 1, NULL, NULL, 1, '2025-02-03 05:50:03.809206', '2025-02-03 05:50:03.809206', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (17, 2, '2025-02-03 05:50:03.809892', '2025-02-03 05:50:03.809892')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (17, 3, '2025-02-03 05:50:03.810615', '2025-02-03 05:50:03.810615')[0m
  [1m[36mOrderSide Create (0.2ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (16, 1, 2, '2025-02-03 05:50:03.811113', '2025-02-03 05:50:03.811113')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:50:03.812220' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:50:03.813352' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:50:03.815094' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.9ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:50:03.816002' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:50:03.817726' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:50:03.818453' WHERE `orders`.`id` = 16[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 52ms (Views: 0.1ms | ActiveRecord: 22.4ms (29 queries, 0 cached) | GC: 8.3ms)
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (1.7ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.5ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.3ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:21:30 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.4ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 8ms (ActiveRecord: 2.3ms (4 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.5ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:54:21.629983', '2025-02-03 05:54:21.629983'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:54:21.629983', '2025-02-03 05:54:21.629983'), (3, 'Cheese Burst', 0, '2025-02-03 05:54:21.629983', '2025-02-03 05:54:21.629983'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:54:21.629983', '2025-02-03 05:54:21.629983');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869'), (710829354, 'Crust', 1, 15, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869'), (82186631, 'Topping', 3, 20, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869'), (192233476, 'Side', 1, 30, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869'), (990217510, 'Side', 2, 20, '2025-02-03 05:54:21.633869', '2025-02-03 05:54:21.633869');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:54:21.637181', '2025-02-03 05:54:21.637181', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:54:21.637181', '2025-02-03 05:54:21.637181', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:54:21.639448', '2025-02-03 05:54:21.639448'), (2, 1, 2, 1, '2025-02-03 05:54:21.639448', '2025-02-03 05:54:21.639448');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:54:21.641395', '2025-02-03 05:54:21.641395');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:54:21.644362', '2025-02-03 05:54:21.644362', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:54:21.647514', '2025-02-03 05:54:21.647514'), (2, 'Mousse Cake', 90, '2025-02-03 05:54:21.647514', '2025-02-03 05:54:21.647514');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:54:21.650647', '2025-02-03 05:54:21.650647')[0m
  [1m[35m (0.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:24:21 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.7ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.4ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.3ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:54:21.755280', '2025-02-03 05:54:21.755280')[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (17, 1, NULL, NULL, 1, '2025-02-03 05:54:21.759222', '2025-02-03 05:54:21.759222', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (18, 2, '2025-02-03 05:54:21.759878', '2025-02-03 05:54:21.759878')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (18, 3, '2025-02-03 05:54:21.760357', '2025-02-03 05:54:21.760357')[0m
  [1m[36mOrderSide Create (0.5ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (17, 1, 2, '2025-02-03 05:54:21.760985', '2025-02-03 05:54:21.760985')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:54:21.762511' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:54:21.763945' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:54:21.766677' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:54:21.767818' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.0ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:54:21.770905' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (1.1ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:54:21.772426' WHERE `orders`.`id` = 17[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 60ms (Views: 0.2ms | ActiveRecord: 21.0ms (29 queries, 0 cached) | GC: 11.4ms)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:24:21 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 9ms (ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 3.6ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (3.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 05:55:54.443893', '2025-02-03 05:55:54.443893'), (2, 'Wheat Thin Crust', 0, '2025-02-03 05:55:54.443893', '2025-02-03 05:55:54.443893'), (3, 'Cheese Burst', 0, '2025-02-03 05:55:54.443893', '2025-02-03 05:55:54.443893'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 05:55:54.443893', '2025-02-03 05:55:54.443893');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770'), (710829354, 'Crust', 1, 15, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770'), (82186631, 'Topping', 3, 20, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770'), (1004639449, 'Topping', 2, 25, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770'), (192233476, 'Side', 1, 30, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770'), (990217510, 'Side', 2, 20, '2025-02-03 05:55:54.446770', '2025-02-03 05:55:54.446770');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, DEFAULT, DEFAULT, 1, '2025-02-03 05:55:54.449575', '2025-02-03 05:55:54.449575', 1, 'Medium', 200.0), (2, 1, 5, DEFAULT, DEFAULT, 1, '2025-02-03 05:55:54.449575', '2025-02-03 05:55:54.449575', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 05:55:54.453355', '2025-02-03 05:55:54.453355'), (2, 1, 2, 1, '2025-02-03 05:55:54.453355', '2025-02-03 05:55:54.453355');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 05:55:54.456371', '2025-02-03 05:55:54.456371');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `size`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 05:55:54.459774', '2025-02-03 05:55:54.459774', DEFAULT, 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 05:55:54.463355', '2025-02-03 05:55:54.463355'), (2, 'Mousse Cake', 90, '2025-02-03 05:55:54.463355', '2025-02-03 05:55:54.463355');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (2, 'Capsicum', 25, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (3, 'Paneer', 35, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (4, 'Mushroom', 30, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 05:55:54.466531', '2025-02-03 05:55:54.466531')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:25:54 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.4ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.3ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 05:55:54.568182', '2025-02-03 05:55:54.568182')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.3ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `topping_id`, `side_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (18, 1, NULL, NULL, 1, '2025-02-03 05:55:54.572135', '2025-02-03 05:55:54.572135', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (19, 2, '2025-02-03 05:55:54.572814', '2025-02-03 05:55:54.572814')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (19, 3, '2025-02-03 05:55:54.573306', '2025-02-03 05:55:54.573306')[0m
  [1m[36mOrderSide Create (0.3ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (18, 1, 2, '2025-02-03 05:55:54.573916', '2025-02-03 05:55:54.573916')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.8ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 05:55:54.575287' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 05:55:54.576904' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (1.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 05:55:54.578037' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 05:55:54.580131' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 05:55:54.581147' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 05:55:54.581999' WHERE `orders`.`id` = 18[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 55ms (Views: 0.1ms | ActiveRecord: 17.5ms (29 queries, 0 cached) | GC: 8.3ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:25:54 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 9ms (ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 5.3ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `my_pizza_factory_test`[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE DATABASE `my_pizza_factory_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `crusts` CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE `crusts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `inventories` CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE `inventories` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `item_type` varchar(255), `item_id` int, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_item_toppings` CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE `order_item_toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_item_id` bigint NOT NULL, `topping_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_item_toppings_on_order_item_id` (`order_item_id`), INDEX `index_order_item_toppings_on_topping_id` (`topping_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_items` CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `order_items` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `pizza_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `crust_id` int, `size` varchar(255), `total_amount` decimal(10,2) DEFAULT 0.0, INDEX `index_order_items_on_order_id` (`order_id`), INDEX `index_order_items_on_pizza_id` (`pizza_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_sides` CASCADE[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE `order_sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `side_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_sides_on_order_id` (`order_id`), INDEX `index_order_sides_on_side_id` (`side_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `orders` CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `orders` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `customer_name` varchar(255), `status` varchar(255), `total_amount` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS `pizzas` CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE `pizzas` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price_regular` decimal(10), `price_medium` decimal(10), `price_large` decimal(10), `crust_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `category` varchar(255), INDEX `index_pizzas_on_crust_id` (`crust_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `sides` CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `toppings` CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE `toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `is_vegetarian` tinyint(1), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (10.2ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_dc7b80a860`
FOREIGN KEY (`order_item_id`)
  REFERENCES `order_items` (`id`)
[0m
  [1m[35m (10.0ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_8bc35592b7`
FOREIGN KEY (`topping_id`)
  REFERENCES `toppings` (`id`)
[0m
  [1m[35m (12.2ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_e3cb28f071`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (13.3ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_d28b17c368`
FOREIGN KEY (`pizza_id`)
  REFERENCES `pizzas` (`id`)
[0m
  [1m[35m (8.0ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_f8cb2d2624`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (9.9ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_fb4604d3fd`
FOREIGN KEY (`side_id`)
  REFERENCES `sides` (`id`)
[0m
  [1m[35m (10.4ms)[0m  [1m[35mALTER TABLE `pizzas` ADD CONSTRAINT `fk_rails_cd6ddc59bc`
FOREIGN KEY (`crust_id`)
  REFERENCES `crusts` (`id`)
[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20250203060821)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20250203060124),
(20250202175256),
(20250202174017),
(20250202170450),
(20250202134356),
(20250202122640),
(20250202115634),
(20250202035725),
(20250202023936),
(20250201135608),
(20250201135559),
(20250201135547),
(20250201135537),
(20250201135526),
(20250201135428),
(20250201135417);[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2025-02-03 06:26:07.182011', '2025-02-03 06:26:07.182012')[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('schema_sha1', 'd34efa3c8ed9e306ca0454387939e3a40ed3c33b', '2025-02-03 06:26:07.183568', '2025-02-03 06:26:07.183568')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 06:26:07.233394', '2025-02-03 06:26:07.233394'), (2, 'Wheat Thin Crust', 0, '2025-02-03 06:26:07.233394', '2025-02-03 06:26:07.233394'), (3, 'Cheese Burst', 0, '2025-02-03 06:26:07.233394', '2025-02-03 06:26:07.233394'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 06:26:07.233394', '2025-02-03 06:26:07.233394');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912'), (710829354, 'Crust', 1, 15, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912'), (82186631, 'Topping', 3, 20, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912'), (1004639449, 'Topping', 2, 25, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912'), (192233476, 'Side', 1, 30, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912'), (990217510, 'Side', 2, 20, '2025-02-03 06:26:07.236912', '2025-02-03 06:26:07.236912');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (1, 1, 1, 1, '2025-02-03 06:26:07.239245', '2025-02-03 06:26:07.239245', 1, 'Medium', 200.0), (2, 1, 5, 1, '2025-02-03 06:26:07.239245', '2025-02-03 06:26:07.239245', 3, 'Large', 500.0);
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 06:26:07.241426', '2025-02-03 06:26:07.241426'), (2, 1, 2, 1, '2025-02-03 06:26:07.241426', '2025-02-03 06:26:07.241426');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 06:26:07.243249', '2025-02-03 06:26:07.243249');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 06:26:07.244919', '2025-02-03 06:26:07.244919', 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 06:26:07.246750', '2025-02-03 06:26:07.246750'), (2, 'Mousse Cake', 90, '2025-02-03 06:26:07.246750', '2025-02-03 06:26:07.246750');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (2, 'Capsicum', 25, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (3, 'Paneer', 35, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (4, 'Mushroom', 30, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 06:26:07.248722', '2025-02-03 06:26:07.248722')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:56:07 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 06:26:07.334381', '2025-02-03 06:26:07.334381')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.1ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`, `total_amount`) VALUES (2, 1, 1, '2025-02-03 06:26:07.337417', '2025-02-03 06:26:07.337417', 1, 'Medium', 260.0)[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 2, '2025-02-03 06:26:07.337944', '2025-02-03 06:26:07.337944')[0m
  [1m[36mOrderItemTopping Create (0.1ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 3, '2025-02-03 06:26:07.338528', '2025-02-03 06:26:07.338528')[0m
  [1m[36mOrderSide Create (0.1ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2025-02-03 06:26:07.338959', '2025-02-03 06:26:07.338959')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 06:26:07.340400' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 06:26:07.341536' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 06:26:07.342291' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 06:26:07.343024' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 06:26:07.343738' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 06:26:07.344296' WHERE `orders`.`id` = 2[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 48ms (Views: 0.2ms | ActiveRecord: 7.2ms (29 queries, 0 cached) | GC: 11.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 11:56:07 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.0ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[35m (41.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `my_pizza_factory_test`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `my_pizza_factory_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `crusts` CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE `crusts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `inventories` CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `inventories` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `item_type` varchar(255), `item_id` int, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_item_toppings` CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE `order_item_toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_item_id` bigint NOT NULL, `topping_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_item_toppings_on_order_item_id` (`order_item_id`), INDEX `index_order_item_toppings_on_topping_id` (`topping_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_items` CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE `order_items` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `pizza_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `crust_id` int, `size` varchar(255), INDEX `index_order_items_on_order_id` (`order_id`), INDEX `index_order_items_on_pizza_id` (`pizza_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_sides` CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE `order_sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `side_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_sides_on_order_id` (`order_id`), INDEX `index_order_sides_on_side_id` (`side_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `orders` CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `orders` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `customer_name` varchar(255), `status` varchar(255), `total_amount` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `pizzas` CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE `pizzas` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price_regular` decimal(10), `price_medium` decimal(10), `price_large` decimal(10), `crust_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `category` varchar(255), INDEX `index_pizzas_on_crust_id` (`crust_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `sides` CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE `sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `toppings` CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `is_vegetarian` tinyint(1), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (9.4ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_dc7b80a860`
FOREIGN KEY (`order_item_id`)
  REFERENCES `order_items` (`id`)
[0m
  [1m[35m (10.0ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_8bc35592b7`
FOREIGN KEY (`topping_id`)
  REFERENCES `toppings` (`id`)
[0m
  [1m[35m (10.1ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_e3cb28f071`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (10.8ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_d28b17c368`
FOREIGN KEY (`pizza_id`)
  REFERENCES `pizzas` (`id`)
[0m
  [1m[35m (8.4ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_f8cb2d2624`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (10.2ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_fb4604d3fd`
FOREIGN KEY (`side_id`)
  REFERENCES `sides` (`id`)
[0m
  [1m[35m (10.8ms)[0m  [1m[35mALTER TABLE `pizzas` ADD CONSTRAINT `fk_rails_cd6ddc59bc`
FOREIGN KEY (`crust_id`)
  REFERENCES `crusts` (`id`)
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20250203063301)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20250203060124),
(20250202175256),
(20250202174017),
(20250202170450),
(20250202134356),
(20250202122640),
(20250202115634),
(20250202035725),
(20250202023936),
(20250201135608),
(20250201135559),
(20250201135547),
(20250201135537),
(20250201135526),
(20250201135428),
(20250201135417);[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2025-02-03 06:34:15.194215', '2025-02-03 06:34:15.194216')[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('schema_sha1', '535c9f1bb310366a977c695067bfc36866d45413', '2025-02-03 06:34:15.195684', '2025-02-03 06:34:15.195685')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (4.7ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 06:35:18.974910', '2025-02-03 06:35:18.974910'), (2, 'Wheat Thin Crust', 0, '2025-02-03 06:35:18.974910', '2025-02-03 06:35:18.974910'), (3, 'Cheese Burst', 0, '2025-02-03 06:35:18.974910', '2025-02-03 06:35:18.974910'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 06:35:18.974910', '2025-02-03 06:35:18.974910');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949'), (710829354, 'Crust', 1, 15, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949'), (82186631, 'Topping', 3, 20, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949'), (1004639449, 'Topping', 2, 25, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949'), (192233476, 'Side', 1, 30, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949'), (990217510, 'Side', 2, 20, '2025-02-03 06:35:18.978949', '2025-02-03 06:35:18.978949');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`) VALUES (1, 1, 1, 1, '2025-02-03 06:35:18.982915', '2025-02-03 06:35:18.982915', 1, 'Medium'), (2, 1, 5, 1, '2025-02-03 06:35:18.982915', '2025-02-03 06:35:18.982915', 3, 'Large');
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 06:35:18.984767', '2025-02-03 06:35:18.984767'), (2, 1, 2, 1, '2025-02-03 06:35:18.984767', '2025-02-03 06:35:18.984767');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 06:35:18.986882', '2025-02-03 06:35:18.986882');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 06:35:18.990298', '2025-02-03 06:35:18.990298', 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 06:35:18.993458', '2025-02-03 06:35:18.993458'), (2, 'Mousse Cake', 90, '2025-02-03 06:35:18.993458', '2025-02-03 06:35:18.993458');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (2, 'Capsicum', 25, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (3, 'Paneer', 35, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (4, 'Mushroom', 30, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 06:35:18.996988', '2025-02-03 06:35:18.996988')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.3ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 12:05:19 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.5ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.5ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.2ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.4ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 06:35:19.102043', '2025-02-03 06:35:19.102043')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `quantity`, `created_at`, `updated_at`, `crust_id`, `size`) VALUES (2, 1, 1, '2025-02-03 06:35:19.106959', '2025-02-03 06:35:19.106959', 1, 'Medium')[0m
  [1m[36mOrderItemTopping Create (0.6ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 2, '2025-02-03 06:35:19.107586', '2025-02-03 06:35:19.107586')[0m
  [1m[36mOrderItemTopping Create (0.2ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 3, '2025-02-03 06:35:19.108507', '2025-02-03 06:35:19.108507')[0m
  [1m[36mOrderSide Create (0.2ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2025-02-03 06:35:19.109109', '2025-02-03 06:35:19.109109')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 06:35:19.110375' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.5ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 06:35:19.111669' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.4ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 06:35:19.113448' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 06:35:19.114797' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.6ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 06:35:19.115907' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 06:35:19.116993' WHERE `orders`.`id` = 2[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 56ms (Views: 0.2ms | ActiveRecord: 16.5ms (29 queries, 0 cached) | GC: 10.5ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 12:05:19 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 4ms (ActiveRecord: 1.3ms (4 queries, 0 cached) | GC: 0.1ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `my_pizza_factory_test`[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE DATABASE `my_pizza_factory_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `crusts` CASCADE[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE `crusts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `inventories` CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE `inventories` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `item_type` varchar(255), `item_id` int, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_item_toppings` CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE `order_item_toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_item_id` bigint NOT NULL, `topping_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_item_toppings_on_order_item_id` (`order_item_id`), INDEX `index_order_item_toppings_on_topping_id` (`topping_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_items` CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `order_items` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `pizza_id` bigint NOT NULL, `crust_id` bigint NOT NULL, `quantity` int, `size` varchar(255), `total_amount` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_items_on_crust_id` (`crust_id`), INDEX `index_order_items_on_order_id` (`order_id`), INDEX `index_order_items_on_pizza_id` (`pizza_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `order_sides` CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE `order_sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `order_id` bigint NOT NULL, `side_id` bigint NOT NULL, `quantity` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, INDEX `index_order_sides_on_order_id` (`order_id`), INDEX `index_order_sides_on_side_id` (`side_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `orders` CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `orders` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `customer_name` varchar(255), `status` varchar(255), `total_amount` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `pizzas` CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE `pizzas` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price_regular` decimal(10), `price_medium` decimal(10), `price_large` decimal(10), `crust_id` bigint NOT NULL, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL, `category` varchar(255), INDEX `index_pizzas_on_crust_id` (`crust_id`)) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `sides` CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE `sides` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS `toppings` CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE `toppings` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `price` decimal(10), `is_vegetarian` tinyint(1), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci[0m
  [1m[35m (9.8ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_dc7b80a860`
FOREIGN KEY (`order_item_id`)
  REFERENCES `order_items` (`id`)
[0m
  [1m[35m (10.7ms)[0m  [1m[35mALTER TABLE `order_item_toppings` ADD CONSTRAINT `fk_rails_8bc35592b7`
FOREIGN KEY (`topping_id`)
  REFERENCES `toppings` (`id`)
[0m
  [1m[35m (11.5ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_e0c46a1d52`
FOREIGN KEY (`crust_id`)
  REFERENCES `crusts` (`id`)
[0m
  [1m[35m (11.3ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_e3cb28f071`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (12.9ms)[0m  [1m[35mALTER TABLE `order_items` ADD CONSTRAINT `fk_rails_d28b17c368`
FOREIGN KEY (`pizza_id`)
  REFERENCES `pizzas` (`id`)
[0m
  [1m[35m (9.1ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_f8cb2d2624`
FOREIGN KEY (`order_id`)
  REFERENCES `orders` (`id`)
[0m
  [1m[35m (10.1ms)[0m  [1m[35mALTER TABLE `order_sides` ADD CONSTRAINT `fk_rails_fb4604d3fd`
FOREIGN KEY (`side_id`)
  REFERENCES `sides` (`id`)
[0m
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE `pizzas` ADD CONSTRAINT `fk_rails_cd6ddc59bc`
FOREIGN KEY (`crust_id`)
  REFERENCES `crusts` (`id`)
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20250202175256)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20250202134356),
(20250202115634),
(20250201135608),
(20250201135559),
(20250201135547),
(20250201135537),
(20250201135526),
(20250201135428),
(20250201135417);[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2025-02-03 07:06:09.610425', '2025-02-03 07:06:09.610426')[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'schema_sha1' ORDER BY `ar_internal_metadata`.`key` ASC LIMIT 1[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('schema_sha1', 'a480aa11e58a30f409bb599759e86d6db236ba86', '2025-02-03 07:06:09.612206', '2025-02-03 07:06:09.612206')[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM `crusts`;
DELETE FROM `inventories`;
DELETE FROM `order_items`;
DELETE FROM `order_sides`;
DELETE FROM `orders`;
DELETE FROM `pizzas`;
DELETE FROM `sides`;
DELETE FROM `toppings`;
INSERT INTO `crusts` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'New Hand Tossed', 0, '2025-02-03 07:06:09.655968', '2025-02-03 07:06:09.655968'), (2, 'Wheat Thin Crust', 0, '2025-02-03 07:06:09.655968', '2025-02-03 07:06:09.655968'), (3, 'Cheese Burst', 0, '2025-02-03 07:06:09.655968', '2025-02-03 07:06:09.655968'), (4, 'Fresh Pan Pizza', 0, '2025-02-03 07:06:09.655968', '2025-02-03 07:06:09.655968');
INSERT INTO `inventories` (`id`, `item_type`, `item_id`, `quantity`, `created_at`, `updated_at`) VALUES (867373232, 'Pizza', 1, 10, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109'), (710829354, 'Crust', 1, 15, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109'), (82186631, 'Topping', 3, 20, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109'), (1004639449, 'Topping', 2, 25, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109'), (192233476, 'Side', 1, 30, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109'), (990217510, 'Side', 2, 20, '2025-02-03 07:06:09.659109', '2025-02-03 07:06:09.659109');
INSERT INTO `order_items` (`id`, `order_id`, `pizza_id`, `crust_id`, `quantity`, `size`, `total_amount`, `created_at`, `updated_at`) VALUES (1, 1, 1, 1, 1, 'Medium', DEFAULT, '2025-02-03 07:06:09.660956', '2025-02-03 07:06:09.660956'), (2, 1, 5, 3, 1, 'Large', DEFAULT, '2025-02-03 07:06:09.660956', '2025-02-03 07:06:09.660956');
INSERT INTO `order_sides` (`id`, `order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (1, 1, 1, 2, '2025-02-03 07:06:09.662800', '2025-02-03 07:06:09.662800'), (2, 1, 2, 1, '2025-02-03 07:06:09.662800', '2025-02-03 07:06:09.662800');
INSERT INTO `orders` (`id`, `customer_name`, `status`, `created_at`, `updated_at`) VALUES (1, 'John Doe', 'pending', '2025-02-03 07:06:09.664303', '2025-02-03 07:06:09.664303');
INSERT INTO `pizzas` (`id`, `name`, `price_regular`, `price_medium`, `price_large`, `crust_id`, `created_at`, `updated_at`, `category`) VALUES (1, 'Deluxe Veggie', 150, 200, 325, 1, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'vegetarian'), (2, 'Cheese and Corn', 175, 375, 475, 2, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'vegetarian'), (3, 'Paneer Tikka', 160, 290, 340, 3, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'vegetarian'), (4, 'Non-Veg Supreme', 190, 325, 425, 4, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'non-vegetarian'), (5, 'Chicken Tikka', 210, 370, 500, 1, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'non-vegetarian'), (6, 'Pepper Barbecue Chicken', 220, 380, 525, 2, '2025-02-03 07:06:09.665782', '2025-02-03 07:06:09.665782', 'non-vegetarian');
INSERT INTO `sides` (`id`, `name`, `price`, `created_at`, `updated_at`) VALUES (1, 'Cold Drink', 55, '2025-02-03 07:06:09.667347', '2025-02-03 07:06:09.667347'), (2, 'Mousse Cake', 90, '2025-02-03 07:06:09.667347', '2025-02-03 07:06:09.667347');
INSERT INTO `toppings` (`id`, `name`, `price`, `is_vegetarian`, `created_at`, `updated_at`) VALUES (1, 'Black Olive', 20, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (2, 'Capsicum', 25, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (3, 'Paneer', 35, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (4, 'Mushroom', 30, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (5, 'Fresh Tomato', 10, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (6, 'Chicken Tikka', 35, FALSE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (7, 'Barbeque Chicken', 45, FALSE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (8, 'Grilled Chicken', 40, FALSE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896'), (9, 'Extra Cheese', 35, TRUE, '2025-02-03 07:06:09.668896', '2025-02-03 07:06:09.668896')[0m
  [1m[35m (0.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (11.0ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.3ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.2ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 2 LIMIT 1[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 12:36:09 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>1, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3, 2]}], "sides"=>[{"side_id"=>1, "quantity"=>2}]}}
  [1m[36mPizza Load (0.2ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 1 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.2ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` IN (3, 2)[0m
  [1m[36mSide Load (0.1ms)[0m  [1m[34mSELECT `sides`.* FROM `sides` WHERE `sides`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mInventory Load (0.2ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO `orders` (`customer_name`, `status`, `total_amount`, `created_at`, `updated_at`) VALUES ('John Doe', 'pending', 370, '2025-02-03 07:06:09.771508', '2025-02-03 07:06:09.771508')[0m
  [1m[36mTopping Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Capsicum' AND `toppings`.`id` != 2 LIMIT 1[0m
  [1m[36mTopping Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mOrderItem Create (0.2ms)[0m  [1m[32mINSERT INTO `order_items` (`order_id`, `pizza_id`, `crust_id`, `quantity`, `size`, `total_amount`, `created_at`, `updated_at`) VALUES (2, 1, 1, 1, 'Medium', NULL, '2025-02-03 07:06:09.775135', '2025-02-03 07:06:09.775135')[0m
  [1m[36mOrderItemTopping Create (0.3ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 2, '2025-02-03 07:06:09.775744', '2025-02-03 07:06:09.775744')[0m
  [1m[36mOrderItemTopping Create (0.1ms)[0m  [1m[32mINSERT INTO `order_item_toppings` (`order_item_id`, `topping_id`, `created_at`, `updated_at`) VALUES (3, 3, '2025-02-03 07:06:09.776367', '2025-02-03 07:06:09.776367')[0m
  [1m[36mOrderSide Create (0.1ms)[0m  [1m[32mINSERT INTO `order_sides` (`order_id`, `side_id`, `quantity`, `created_at`, `updated_at`) VALUES (2, 1, 2, '2025-02-03 07:06:09.776971', '2025-02-03 07:06:09.776971')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Pizza' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 9, `inventories`.`updated_at` = '2025-02-03 07:06:09.778252' WHERE `inventories`.`id` = 867373232[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Crust' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.3ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 14, `inventories`.`updated_at` = '2025-02-03 07:06:09.779287' WHERE `inventories`.`id` = 710829354[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.2ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 24, `inventories`.`updated_at` = '2025-02-03 07:06:09.780274' WHERE `inventories`.`id` = 1004639449[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Topping' AND `inventories`.`item_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.1ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 19, `inventories`.`updated_at` = '2025-02-03 07:06:09.781040' WHERE `inventories`.`id` = 82186631[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`item_type` = 'Side' AND `inventories`.`item_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInventory Update (0.1ms)[0m  [1m[33mUPDATE `inventories` SET `inventories`.`quantity` = 29, `inventories`.`updated_at` = '2025-02-03 07:06:09.781698' WHERE `inventories`.`id` = 192233476[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE `orders` SET `orders`.`status` = 'confirmed', `orders`.`updated_at` = '2025-02-03 07:06:09.782233' WHERE `orders`.`id` = 2[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 48ms (Views: 0.2ms | ActiveRecord: 7.3ms (29 queries, 0 cached) | GC: 8.1ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 867373232 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 710829354 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 82186631 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 1004639449 LIMIT 1[0m
  [1m[36mInventory Load (0.0ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 192233476 LIMIT 1[0m
  [1m[36mInventory Load (0.1ms)[0m  [1m[34mSELECT `inventories`.* FROM `inventories` WHERE `inventories`.`id` = 990217510 LIMIT 1[0m
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3 LIMIT 1[0m
Started POST "/orders" for 127.0.0.1 at 2025-02-03 12:36:09 +0530
Processing by OrdersController#create as JSON
  Parameters: {"order"=>{"customer_name"=>"John Doe", "pizzas"=>[{"pizza_id"=>4, "size"=>"Medium", "crust_id"=>1, "topping_ids"=>[3]}]}}
  [1m[36mPizza Load (0.1ms)[0m  [1m[34mSELECT `pizzas`.* FROM `pizzas` WHERE `pizzas`.`id` = 4 LIMIT 1[0m
  [1m[36mCrust Load (0.1ms)[0m  [1m[34mSELECT `crusts`.* FROM `crusts` WHERE `crusts`.`id` = 1 LIMIT 1[0m
  [1m[36mTopping Load (0.1ms)[0m  [1m[34mSELECT `toppings`.* FROM `toppings` WHERE `toppings`.`id` = 3[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTopping Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `toppings` WHERE `toppings`.`name` = 'Paneer' AND `toppings`.`id` != 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Content in 3ms (ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotSaved (Failed to save the record):
  
app/controllers/orders_controller.rb:26:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
